#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const cdk = require("aws-cdk-lib");
const dotenv = require("dotenv");
const ValidationPipelineStack_1 = require("./ValidationPipelineStack");
// Load environment variables from .env.local
dotenv.config({ path: '.env.local' });
// Create CDK app
const app = new cdk.App();
// Deploy the validation pipeline stack
new ValidationPipelineStack_1.ValidationPipelineStack(app, 'ValidationPipelineStack', {
    // If env variables are present, use them to configure the stack
    vpcId: process.env.AWS_VPC_ID,
    subnetIds: process.env.AWS_SUBNETS?.split(','),
    securityGroupId: process.env.AWS_SECURITY_GROUP_ID,
    dynamoDbTableName: process.env.DYNAMODB_TABLE_NAME || 'ToolShedServers',
    // Set environment for deployment
    env: {
        account: process.env.CDK_DEFAULT_ACCOUNT || process.env.AWS_ACCOUNT_ID,
        region: 'us-east-1',
    },
    // Add tags
    tags: {
        Project: 'ToolShed',
        Component: 'ValidationPipeline',
    },
});
// Synthesize the CloudFormation template
app.synth();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vYXBwLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLG1DQUFtQztBQUNuQyxpQ0FBaUM7QUFDakMsdUVBQW9FO0FBRXBFLDZDQUE2QztBQUM3QyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsSUFBSSxFQUFFLFlBQVksRUFBRSxDQUFDLENBQUM7QUFFdEMsaUJBQWlCO0FBQ2pCLE1BQU0sR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBRTFCLHVDQUF1QztBQUN2QyxJQUFJLGlEQUF1QixDQUFDLEdBQUcsRUFBRSx5QkFBeUIsRUFBRTtJQUMxRCxnRUFBZ0U7SUFDaEUsS0FBSyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsVUFBVTtJQUM3QixTQUFTLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxXQUFXLEVBQUUsS0FBSyxDQUFDLEdBQUcsQ0FBQztJQUM5QyxlQUFlLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUI7SUFDbEQsaUJBQWlCLEVBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxtQkFBbUIsSUFBSSxpQkFBaUI7SUFFdkUsaUNBQWlDO0lBQ2pDLEdBQUcsRUFBRTtRQUNILE9BQU8sRUFBRSxPQUFPLENBQUMsR0FBRyxDQUFDLG1CQUFtQixJQUFJLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYztRQUN0RSxNQUFNLEVBQUUsV0FBVztLQUNwQjtJQUVELFdBQVc7SUFDWCxJQUFJLEVBQUU7UUFDSixPQUFPLEVBQUUsVUFBVTtRQUNuQixTQUFTLEVBQUUsb0JBQW9CO0tBQ2hDO0NBQ0YsQ0FBQyxDQUFDO0FBRUgseUNBQXlDO0FBQ3pDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIiMhL3Vzci9iaW4vZW52IG5vZGVcbmltcG9ydCAqIGFzIGNkayBmcm9tICdhd3MtY2RrLWxpYic7XG5pbXBvcnQgKiBhcyBkb3RlbnYgZnJvbSAnZG90ZW52JztcbmltcG9ydCB7IFZhbGlkYXRpb25QaXBlbGluZVN0YWNrIH0gZnJvbSAnLi9WYWxpZGF0aW9uUGlwZWxpbmVTdGFjayc7XG5cbi8vIExvYWQgZW52aXJvbm1lbnQgdmFyaWFibGVzIGZyb20gLmVudi5sb2NhbFxuZG90ZW52LmNvbmZpZyh7IHBhdGg6ICcuZW52LmxvY2FsJyB9KTtcblxuLy8gQ3JlYXRlIENESyBhcHBcbmNvbnN0IGFwcCA9IG5ldyBjZGsuQXBwKCk7XG5cbi8vIERlcGxveSB0aGUgdmFsaWRhdGlvbiBwaXBlbGluZSBzdGFja1xubmV3IFZhbGlkYXRpb25QaXBlbGluZVN0YWNrKGFwcCwgJ1ZhbGlkYXRpb25QaXBlbGluZVN0YWNrJywge1xuICAvLyBJZiBlbnYgdmFyaWFibGVzIGFyZSBwcmVzZW50LCB1c2UgdGhlbSB0byBjb25maWd1cmUgdGhlIHN0YWNrXG4gIHZwY0lkOiBwcm9jZXNzLmVudi5BV1NfVlBDX0lELFxuICBzdWJuZXRJZHM6IHByb2Nlc3MuZW52LkFXU19TVUJORVRTPy5zcGxpdCgnLCcpLFxuICBzZWN1cml0eUdyb3VwSWQ6IHByb2Nlc3MuZW52LkFXU19TRUNVUklUWV9HUk9VUF9JRCxcbiAgZHluYW1vRGJUYWJsZU5hbWU6IHByb2Nlc3MuZW52LkRZTkFNT0RCX1RBQkxFX05BTUUgfHwgJ1Rvb2xTaGVkU2VydmVycycsXG4gIFxuICAvLyBTZXQgZW52aXJvbm1lbnQgZm9yIGRlcGxveW1lbnRcbiAgZW52OiB7XG4gICAgYWNjb3VudDogcHJvY2Vzcy5lbnYuQ0RLX0RFRkFVTFRfQUNDT1VOVCB8fCBwcm9jZXNzLmVudi5BV1NfQUNDT1VOVF9JRCxcbiAgICByZWdpb246ICd1cy1lYXN0LTEnLFxuICB9LFxuICBcbiAgLy8gQWRkIHRhZ3NcbiAgdGFnczoge1xuICAgIFByb2plY3Q6ICdUb29sU2hlZCcsXG4gICAgQ29tcG9uZW50OiAnVmFsaWRhdGlvblBpcGVsaW5lJyxcbiAgfSxcbn0pO1xuXG4vLyBTeW50aGVzaXplIHRoZSBDbG91ZEZvcm1hdGlvbiB0ZW1wbGF0ZVxuYXBwLnN5bnRoKCk7ICJdfQ==